# 収益化宣言プラグイン

## 概要

既存のティラノ製ゲームに読み込むことで、プラグインを呼び出したタイミングで独自のメッセージを呼び出すことができます。  
(例)「この配信は収益を目的としていません」という全画面絵が出る。  
配信者は作者が提供するパッチを充てることでこれを外したり、内容を変更することができる。  
この時、パッチは有料で販売してもよい。

## 使用方法

first.ksに特定のマクロを入れる。
それ以降の部分ならどこでもマスクを呼び出せる。
呼び出すマスクの画像を変更できる。
別途でパッチを作成すると無効化できる。

## 表示内容

* 収益化をしているときは収益化用パッチを購入するようにお願い
* 「現在無収益でないと設定されているが間違いないか？」というYN
* 

## 対象

* 配信しない人
* 配信する人(無収益)
* 配信する人(収益)

``` mermaid
---
title: first選択肢
---
stateDiagram-v2
    state "注意書き" as 0
    state "配信していない" as 10
    state "配信している" as 11
    state "収益が発生する" as 111
    state "無配信モード" as A
    state "無料配信モード" as B
    state "有料配信モード" as C

    [*]-->first.ks
    0-->10
    0-->11
    11-->111
    state first.ks{
        0   10  11  111
    }
    10-->A
    11-->B
    111-->C:パッチ販売サイトで購入
    state GAMEstart{
        A B C
    }
```

``` mermaid
sequenceDiagram

        box gray 外部サイト
        participant D as パッチ販売サイト
    end
    box ゲーム内
        participant A as 無配信モード
        participant B as 無料配信モード
        participant C as 有料配信モード
    end
    note over C:有料を買ったかどうかの<br>表記を行うか選べる

    critical 任意のポイントを経過
        note over A,B :収益化プラグイン動作中のことを明記
        C->>C:パッチを購入したことを表記or<br>このポイントを無視する
        option モード切替示唆

        note over A,B : 全画面画像とボタンを表示。ゲームを続けるには5秒ほど待つ。

            A ->>B:「もし配信しているならこちら」
            A -xD:「有料配信ならこちらを行いなさい」<br>(強制ゲームEND)
            A ->>A:「私は配信していません」ボタン
            B -xD:「有料配信ならこちらを行いなさい」(強制ゲームEND)
            B ->>B:「私の配信には収益は発生しません」ボタン
        note over A,B:画面外で動作を検知したときも同じ動作
    end

    
```

有料を買ったとき、特定の変数がＯＮになる。
これを利用して有料限定のアイテムなど使えるかも。  
sleepgame中に行われるとバグる可能性あり。強制的にawakegameさせるので。  

**実装予定**  
使用者によりレベルを設定。レベルに達してるときのみこれが発動するのでもいいかも。

|  レベル  |  条件(配信は前提)  |　虚偽の懲罰 |
| ---- | ---- | ---- |
レベル1 | 配信プラットフォームの収益発生条件を満たしていない | 通常 |
レベル2 | このゲームの配信で収益を発生させる(スパチャなど) | 強制終了(自動セーブ) |
レベル3 | 配信プラットフォームの収益発生条件を満たしている |　強制終了(sf,f削除・初期化) |
